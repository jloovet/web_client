<!DOCTYPE html>
<html lang="en">

<head>
  <title>React Tutorial</title>
  <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.1.0/uuidv4.min.js"></script>

  <link rel="stylesheet" type="text/css" href="App.css">
</head>


<body>
  <div id="root"></div>

  <script type="text/babel">

    //import "./App.css" -fick flytta denna till head

    //kan ligga i en Header.js och importeras... La till  inline styling i h1
    const Header = () => {
      const headerStyle = {
        padding: "20px 0",
        lineHeight: "1.5em",
      }

      return (
        <header style={headerStyle}>
          <h1
            style={{
              fontSize: "6rem",
              fontWeight: "600",
              marginBottom: "2rem",
              lineHeight: "1em",
              color: "black",
              textAlign: "left",
            }}
          >
            Mitt Lag
          </h1>
        </header>
      )
    }


    //kan ligga i en TodoContainer.js och importeras... 
    class TodoContainer extends React.Component {
      state = {
        todos: [
          {
            id: uuidv4(),
            title: "Setup development environment",
            position: "false sdsd"
          },
          {
            id: uuidv4(),
            title: "Develop website and add content",
            position: "sddfalse"
          },
          {
            id: uuidv4(),
            title: "Deploy to live server",
            position: "aaa false"
          }
        ]
      };

      handleChange = (id) => {
        this.setState(prevState => ({
          todos: prevState.todos.map(todo => {
            if (todo.id === id) {
              return {
                ...todo,
              }
            }
            return todo
          }),
        }))
      };

      delTodo = id => {
        this.setState({
          todos: [
            ...this.state.todos.filter(todo => {
              return todo.id !== id;
            })
          ]
        });
      };

      addTodoItem = (title, position) => {
        const newTodo = {
          id: uuidv4(),
          title: title,
          position: position
        };
        this.setState({
          todos: [...this.state.todos, newTodo]
        });
      };

      setUpdate = (updatedTitle, id) => {
        this.setState({
          todos: this.state.todos.map(todo => {
            if (todo.id === id) {
              todo.title = updatedTitle
            }
            return todo
          }),
        })
      }

      render() {
        return (
          <div className="container">
            <div className="inner">
              <Header />
              <TodoList
                todos={this.state.todos}
                handleChangeProps={this.handleChange}
                deleteTodoProps={this.delTodo}
                setUpdate={this.setUpdate}
              />
              <br></br>
              <h2>Lägg till ny spelare:</h2>
              <InputTodo addTodoProps={this.addTodoItem} />

            </div>
          </div>
        );
      }
    }

    //kan ligga i en TodoList.js och importeras... 
    class TodoList extends React.Component {
      render() {
        return (
          <table>
            <tr>
              <th>Spelarnamn</th>
              <th>Postion</th>
            </tr>
            {this.props.todos.map(todo => (
              //TodoItem(todo)  //om funk, (då man kör hoks)
              <TodoItem
                key={todo.id}
                todo={todo}
                handleChangeProps={this.props.handleChangeProps}
                deleteTodoProps={this.props.deleteTodoProps}
                setUpdate={this.props.setUpdate}
              />
            ))}
          </table>
        )
      }
    }

    //kan ligga i en TodiItem.js och importeras... 
    class TodoItem extends React.Component {

      state = {
        editing: false,
      }

      handleEditing = () => {
        this.setState({
          editing: true,
        })
      }

      handleUpdatedDone = event => {
        console.log(event.key)
        if (event.key === "Enter") {
          this.setState({ editing: false })
        }
      }

      render() {
        const completedStyle = {
          fontStyle: "italic",
          color: "#595959",
          opacity: 0.4,
          textDecoration: "line-through",
        }

        //"destructure" the todo and get variables from it
        const { position, id, title } = this.props.todo


        //hantera edit-fältet
        let viewMode = {}
        let editMode = {}
        if (this.state.editing) {
          viewMode.display = "none"
        } else {
          editMode.display = "none"
        }


        return (
          <tr>
            <td className="item">
              <div style={viewMode}>
               
                <span style={false ? completedStyle : null}>
                  {title}
                </span>
                
              </div>
              <input
                type="text"
                style={editMode}
                className="textInput"
                value={title}
                onChange={e => {
                  this.props.setUpdate(e.target.value, id)
                }}
                onKeyDown={this.handleUpdatedDone}
              />
            </td>
            <td>
              {position}
            </td>
            <td>
              <button  onClick={this.handleEditing} class="changebutton"> Ändra </button>
              <button onClick={() => this.props.deleteTodoProps(id)} class="delbutton"> Ta bort </button>
            </td>
          </tr>
        )
      }
    }


    //kan ligga i en InputTodo.js och importeras... 
    class InputTodo extends React.Component {

      state = {
        title: "",
        position: ""
      };

      //kan hantera flera text-fält, tack tillägget name="title" nedan
      onChange = e => {
        this.setState({
          [e.target.name]: e.target.value,
        })
      }

      handleSubmit = e => {
        e.preventDefault()
        if (this.state.title.trim()) {
          this.props.addTodoProps(this.state.title)
          this.props.addTodoProps(this.state.position)
          this.setState({
            title: "", position: ""
          })
        } else {
          alert("Please write item")
        }
      }

      render() {
        return (
          <form onSubmit={this.handleSubmit} className="form-container">
            <label for="spelare">Spelarens namn:</label><br></br>
            <input
              type="text"
              className="input-text-x"
              value={this.state.title}
              name="title"
              onChange={this.onChange}
            />
            <br></br>
            <label for="position">Spelarens position:</label><br></br>
            <select onChange={this.onChange} id="positioner" name="positioner">
              <option value="Vänsterback">Vänsterback</option>
              <option value="Högerback">Högerback</option>
              <option value="Mittback">Mittback</option>
              <option value="Libro">Libro</option>
            </select>
            <br></br>
            <label for="gradering">Gradering:</label><br></br>
            <input type="radio" id="ok" name="ok" value="ok" checked />
            <label for="ok">Okej</label><br></br>
            <input type="radio" id="lovande" name="lovande" value="lovande" />
            <label for="lovande">Lovande</label><br></br>
            <input type="radio" id="enast" name="enast" value="enast" />
            <label for="enast">Enastående!</label><br></br>

            <button className="input-submit-x">Submit</button>
          </form>
        )
      }
    }



    ReactDOM.render(
      <React.StrictMode>
        <TodoContainer />
      </React.StrictMode >,
      document.getElementById("root")
    )


  </script>
</body>

</html>